import{_ as g}from"./DvD7MiWp.js";import{_ as A}from"./B_jixn_a.js";import{g as d,l as x,x as y,A as T,k as $,c as k,b as u,w as r,B as h,C as z,o as B,d as E,h as f}from"./vj23PmSK.js";import{u as O}from"./Dr-P2rpX.js";function _(m,o){const l={name:/^[a-zA-Z가-힣\u4E00-\u9FFF\u3400-\u4DBF\uF900-\uFAFF\u3040-\u309F\u30A0-\u30FF][a-zA-Z가-힣\u4E00-\u9FFF\u3400-\u4DBF\uF900-\uFAFF\u3040-\u309F\u30A0-\u30FF\s]*$/,password:/^[a-zA-Z!@#$%&_]+$/,email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/};return d(()=>l[m].test(o)&&o!==""&&o!==null)}const N={__name:"login",setup(m){const o=h(),l=d(()=>o.public.mode),t=x({email:null,pwd:null});y(()=>{l.value==="development"&&(t.value={email:o.public.authId,pwd:o.public.authPwd})});const v=d(()=>({notValue:Object.values(t.value).some(a=>a==null||a==="")})),p=O(),F=T(),w=$(),b=async a=>{a.preventDefault();try{const e=await $fetch("/api/auth/login",{method:"POST",body:{...t.value}});if(e){const{uid:s,refreshToken:c,accessToken:i}=e;F.setToken(i),p.add({id:"login-complete",title:"로그인에 성공하였습니다.",icon:"memory:login"}),w.push("/admin")}}catch(e){p.add({id:"login-fail",title:`ERROR ${e.statusCode}`,description:e.data.message||"로그인중에 문제가 발생하였습니다.",icon:"memory:alert-octagon",color:"red"})}};return(a,e)=>{const s=g,c=A,i=z;return B(),k("div",null,[u(i,{name:"auth-body"},{title:r(()=>[E(" LOGIN ")]),content:r(()=>[u(c,{cancelable:!1,validate:v.value,onSubmit:e[2]||(e[2]=n=>b(n)),onOnFocus:e[3]||(e[3]=n=>a.onFocused=!0),submitText:"Login"},{default:r(()=>[u(s,{form:t.value,title:"Email",bind:"email",inputType:"email",onInput:e[0]||(e[0]=n=>t.value.email=n),autocomplete:"user-email",required:"",id:"user-email",validate:f(_)("email",t.value.email)},null,8,["form","validate"]),u(s,{form:t.value,title:"Password",bind:"pwd",inputType:"password",onInput:e[1]||(e[1]=n=>t.value.pwd=n),autocomplete:"current-password",required:"",id:"user-pwd",validate:f(_)("password",t.value.pwd)},null,8,["form","validate"])]),_:1},8,["validate"])]),_:1})])}}};export{N as default};
